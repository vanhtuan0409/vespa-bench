# Copyright Vespa.ai. All rights reserved.

schema doc {
  document doc {
    field id type long {
      indexing: attribute | summary
    }
    field dataroom_id type string {
      indexing: attribute | summary
      rank: filter
      match: exact 
    }
    field embedding type tensor<bfloat16>(x[256]) {
      indexing: attribute | summary | index
      attribute {
        distance-metric: dotproduct
      }
      index {
        hnsw {
          max-links-per-node: 16
          neighbors-to-explore-at-insert: 100
        }
      }
    }
  }
  rank-profile default {
    inputs {
      query(qemb) tensor<bfloat16>(x[256])
    }
    first-phase {
      expression: closeness(field,embedding)
    }
  }
  document-summary minimal {
    summary id {}
    summary dataroom_id {}
  }
}
